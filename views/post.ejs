<%- include("partials/header") -%>
    <div class="container">
        <div class="searchContainer">
            <input type="text" id="skillSearch" placeholder="Search by skill...">
            <button id="searchBtn">Search</button>
        </div>
    <!-- Posts Listing -->
     <div id="postContainer">
        <% if (posts && posts.length > 0) { %>
            <% posts.forEach(post => { %>
                <div class="jobPosting">
                    <div class="profilePhoto">
                        <img src="<%= post.profile_photo || '/images/default_profile_photo.jpg' %>" alt="Profile Photo">
                    </div>
                    <a href="javascript:void(0);" data_user_id="<%= post.user_id %>" onclick="viewProfile(this)"
                        class="viewProfileBtn"><%= post.username %></a>
                    <div class="jobDetails">
                        <h2><%= post.title %></h2>
                        <p><strong>Skills:</strong> <%= post.skills %></p>
                        <p><strong>Description:</strong> <%= post.content %></p>
                        <p><strong>Posted:</strong> <%= new Date(post.created_at).toLocaleDateString() %></p>
                    </div>
                </div>
            <% }) %>
        <% } else { %>
            <p>No posts found.</p>
        <% } %>
     </div>
    
    </div>
        
    
    <!-- Footer Section -->
    <%- include("partials/footer") -%>
    <script src="/view_profile.js"></script>
    <script>
        document.getElementById('searchBtn').addEventListener('click', function() {
            console.log("yes means yes");
            const searchTerm = document.getElementById('skillSearch').value.toLowerCase();
            const posts = document.querySelectorAll('#postContainer .jobPosting');
            console.log(posts);
            posts.forEach(post => {
                const skill = post.querySelector('.jobDetails p:nth-of-type(1)').innerText.toLowerCase();
                post.style.display = skill.includes(searchTerm) ? 'block' : 'none';
            });
        });
    </script>
</body>
</html>